<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<title>For Surbhi ❤️</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Fira+Code:wght@500&display=swap');

  html, body {
    margin: 0; padding: 0;
    background: #000;
    overflow: hidden;
    touch-action: none;
  }

  canvas {
    display: block;
    position: absolute;
    top: 0; left: 0;
  }

  #text-container {
    position: absolute;
    bottom: 12%;
    left: 0;
    width: 100%;
    text-align: center;
    z-index: 10;
    pointer-events: none;
  }

  #typewriter {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(30px, 8vw, 55px);
    color: #ff4d6d;
    text-shadow: 0 0 10px #ff4d6d, 0 0 30px #ff0040;
    display: inline-block;
  }

  .cursor {
    display: inline-block;
    width: 3px;
    height: 1em;
    background-color: #ff4d6d;
    margin-left: 5px;
    vertical-align: middle;
    animation: blink 1s infinite;
  }

  @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

  #start {
    position: fixed;
    inset: 0;
    background: radial-gradient(circle, #1a0005 0%, #000 100%);
    color: #ff4d6d;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-family: 'Fira Code', monospace;
    z-index: 100;
    cursor: pointer;
    transition: opacity 1.5s;
  }

  .heart-beat { animation: beat 1.2s infinite ease-in-out; }
  @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.3); } }
</style>
</head>

<body>

<div id="start">
  <div class="heart-beat" style="font-size: 60px;">❤️</div>
  <p style="margin-top:20px; letter-spacing: 2px;">CLICK FOR SURBHI</p>
</div>

<canvas id="heartCanvas"></canvas>
<canvas id="treeCanvas"></canvas>

<div id="text-container">
  <span id="typewriter"></span><span class="cursor"></span>
</div>

<audio id="music" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
const hCanvas = document.getElementById("heartCanvas");
const hCtx = hCanvas.getContext("2d");
const tCanvas = document.getElementById("treeCanvas");
const tCtx = tCanvas.getContext("2d");

function resize(){
  hCanvas.width = tCanvas.width = window.innerWidth;
  hCanvas.height = tCanvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

let turtle = { x: 0, y: 0, a: -90 };
let treeQueue = [];
const message = "Surbhi ❤️ love you";
let textIndex = 0;

// Floating Hearts
let hearts = [];
class Heart {
    constructor() { this.reset(); }
    reset() {
        this.x = Math.random() * hCanvas.width;
        this.y = hCanvas.height + 20;
        this.size = Math.random() * 15 + 5;
        this.speed = Math.random() * 1.5 + 0.5;
        this.opacity = Math.random() * 0.6 + 0.2;
    }
    update() {
        this.y -= this.speed;
        if (this.y < -20) this.reset();
    }
    draw() {
        hCtx.fillStyle = `rgba(255, 77, 109, ${this.opacity})`;
        hCtx.font = `${this.size}px serif`;
        hCtx.fillText("❤️", this.x, this.y);
    }
}

function f(dist, color, width) {
  treeQueue.push(() => {
    tCtx.beginPath();
    tCtx.strokeStyle = color;
    tCtx.lineWidth = width;
    tCtx.lineCap = "round";
    tCtx.shadowBlur = 10;
    tCtx.shadowColor = color;
    tCtx.moveTo(turtle.x, turtle.y);
    
    let rad = turtle.a * (Math.PI / 180);
    let nx = turtle.x + Math.cos(rad) * dist;
    let ny = turtle.y + Math.sin(rad) * dist;
    
    tCtx.lineTo(nx, ny);
    tCtx.stroke();
    tCtx.shadowBlur = 0;
    turtle.x = nx; turtle.y = ny;
  });
}

function l(angle) { treeQueue.push(() => turtle.a -= angle); }
function r(angle) { treeQueue.push(() => turtle.a += angle); }

function dot() {
  treeQueue.push(() => {
    tCtx.fillStyle = "#ff0040";
    tCtx.shadowBlur = 15;
    tCtx.shadowColor = "#ff0040";
    tCtx.beginPath();
    tCtx.arc(turtle.x, turtle.y, 4, 0, Math.PI * 2);
    tCtx.fill();
    tCtx.shadowBlur = 0;
  });
}

function buildTree(len, depth) {
  if (len < 12 || depth > 10) { dot(); return; }
  let width = Math.max(1, len / 12);
  let color = `hsl(${340 + depth * 3}, 100%, ${60 + depth * 2}%)`;
  f(len, color, width);
  let s = null;
  treeQueue.push(() => { s = { ...turtle }; });
  l(25); buildTree(len * 0.75, depth + 1);
  treeQueue.push(() => { turtle = { ...s }; });
  r(50); buildTree(len * 0.75, depth + 1);
  treeQueue.push(() => { turtle = { ...s }; });
}

function typeWriter() {
  if (textIndex < message.length) {
    document.getElementById("typewriter").innerHTML += message.charAt(textIndex);
    textIndex++;
    setTimeout(typeWriter, 150);
  }
}

function mainLoop() {
  hCtx.clearRect(0, 0, hCanvas.width, hCanvas.height);
  hearts.forEach(h => { h.update(); h.draw(); });

  // Draw 6 segments of tree per frame
  for(let i=0; i<6; i++) {
    if(treeQueue.length > 0) treeQueue.shift()();
  }
  
  requestAnimationFrame(mainLoop);
}

document.getElementById("start").onclick = function() {
  this.style.opacity = 0;
  setTimeout(() => this.remove(), 1500);
  document.getElementById("music").play().catch(() => {});
  
  for(let i=0; i<40; i++) hearts.push(new Heart());
  
  turtle = { x: tCanvas.width / 2, y: tCanvas.height * 0.82, a: -90 };
  buildTree(tCanvas.height * 0.18, 0);
  
  mainLoop();
  setTimeout(typeWriter, 1000);
};
</script>
</body>
</html>
