<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>For Surbhi ❤️</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap');

  body, html {
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    background: #000;
    overflow: hidden;
    touch-action: none; /* मोबाइल टच को बेहतर बनाने के लिए */
  }

  canvas {
    display: block;
    position: absolute;
    top: 0; left: 0;
  }

  /* मोबाइल के हिसाब से टेक्स्ट की जगह और साइज */
  #text-container {
    position: absolute;
    bottom: 15%; /* मोबाइल पर थोड़ा ऊपर ताकि कीबोर्ड या बटन के पीछे न छुपे */
    left: 0;
    width: 100%;
    text-align: center;
    z-index: 10;
  }

  #typewriter {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(24px, 7vw, 45px); /* मोबाइल पर अपने आप छोटा हो जाएगा */
    color: #ff4d6d;
    text-shadow: 0 0 10px #ff4d6d, 0 0 25px #ff0040;
    white-space: nowrap;
  }

  #start-screen {
    position: fixed;
    inset: 0;
    background: radial-gradient(circle, #1a0005 0%, #000 100%);
    color: #ff4d6d;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 100;
    text-align: center;
    padding: 20px;
  }

  .heart-btn {
    font-size: 80px;
    animation: pulse 1.2s infinite;
    cursor: pointer;
  }

  @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }
</style>
</head>

<body>

<div id="start-screen" onclick="startApp()">
  <div class="heart-btn">❤️</div>
  <p style="font-family: sans-serif; letter-spacing: 1px; margin-top: 20px;">SURBHI, TAP THE HEART</p>
</div>

<canvas id="bgCanvas"></canvas>
<canvas id="treeCanvas"></canvas>

<div id="text-container">
  <span id="typewriter"></span>
</div>

<audio id="music" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
const bgCanvas = document.getElementById("bgCanvas");
const bgCtx = bgCanvas.getContext("2d");
const tCanvas = document.getElementById("treeCanvas");
const tCtx = tCanvas.getContext("2d");

let message = "Surbhi ❤️ love you";
let treeQueue = [];
let textIndex = 0;
let hearts = [];

function resize() {
  bgCanvas.width = tCanvas.width = window.innerWidth;
  bgCanvas.height = tCanvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

class FloatingHeart {
  constructor() { this.reset(); }
  reset() {
    this.x = Math.random() * bgCanvas.width;
    this.y = bgCanvas.height + 20;
    this.size = Math.random() * 12 + 8;
    this.speed = Math.random() * 1.5 + 0.5;
    this.opacity = Math.random() * 0.5 + 0.3;
  }
  update() {
    this.y -= this.speed;
    if (this.y < -20) this.reset();
  }
  draw() {
    bgCtx.globalAlpha = this.opacity;
    bgCtx.font = `${this.size}px serif`;
    bgCtx.fillText("❤️", this.x, this.y);
  }
}

function startApp() {
  document.getElementById("start-screen").style.display = "none";
  document.getElementById("music").play().catch(() => {});
  
  for(let i=0; i<30; i++) hearts.push(new FloatingHeart());
  
  // मोबाइल पर पेड़ की ऊंचाई सेट करना
  let startX = tCanvas.width / 2;
  let startY = tCanvas.height * 0.8;
  let branchLen = tCanvas.height * 0.15; 
  
  drawTree(startX, startY, branchLen, -90, 10);
  animate();
  typeText();
}

function drawTree(x, y, len, angle, depth) {
  if (depth === 0) return;

  treeQueue.push(() => {
    let rad = angle * (Math.PI / 180);
    let nx = x + Math.cos(rad) * len;
    let ny = y + Math.sin(rad) * len;

    tCtx.beginPath();
    tCtx.strokeStyle = `hsl(340, 100%, ${50 + (10-depth)*2}%)`;
    tCtx.lineWidth = depth * 0.8;
    tCtx.lineCap = "round";
    tCtx.moveTo(x, y);
    tCtx.lineTo(nx, ny);
    tCtx.stroke();

    // फूलों वाले डॉट्स
    if (depth < 4) {
      tCtx.fillStyle = "#ff0040";
      tCtx.beginPath();
      tCtx.arc(nx, ny, 3, 0, Math.PI * 2);
      tCtx.fill();
    }

    drawTree(nx, ny, len * 0.75, angle - 25, depth - 1);
    drawTree(nx, ny, len * 0.75, angle + 35, depth - 1);
  });
}

function typeText() {
  if (textIndex < message.length) {
    document.getElementById("typewriter").innerHTML += message.charAt(textIndex);
    textIndex++;
    setTimeout(typeText, 150);
  }
}

function animate() {
  bgCtx.clearRect(0, 0, bgCanvas.width, bgCanvas.height);
  hearts.forEach(h => { h.update(); h.draw(); });

  // पेड़ धीरे-धीरे उगेगा
  if (treeQueue.length > 0) {
    let currentBatch = treeQueue.splice(0, 2);
    currentBatch.forEach(task => task());
  }

  requestAnimationFrame(animate);
}
</script>
</body>
</html>
